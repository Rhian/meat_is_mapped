require 'rubygems'
require 'dm-sqlite-adapter'
require 'dm-rails'
require 'dm-migrations'
require 'data_mapper'
require 'geocoder'
require 'dm-validations'

adapter = DataMapper.setup(:default, 'sqlite3:///home/user/RubyExamples/MeatMap/db/animal_data.sqlite3.db')

class Abbatoir
  include DataMapper::Resource
  property :id, Serial, :key => true
  property :name, String
  property :address, String
  property :postcode, String
  property :longitude, Float
  property :latitude, Float
	geocoded_by :postcode   # can also be an IP address
after_validation :geocode          # auto-fetch coordinates
end

DataMapper.finalize
DataMapper.auto_migrate!
